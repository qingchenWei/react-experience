(self.webpackChunkreact_demo=self.webpackChunkreact_demo||[]).push([[104],{8961:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});t(2845);var r=t(7309),o=t(5671),i=t(3144),s=t(9340),a=t(1129),c=t(2791),u=t(3504),p=t(2007),l=t.n(p),d=t(3538),f=t.n(d),h=(0,c.createContext)(),b=t(3329),y=function(e){(0,s.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=n.call.apply(n,[this].concat(i))).state={msg:"SonChildren"},e}return(0,i.Z)(t,[{key:"componentDidMount",value:function(){var e=this;f().subscribe("name",(function(n,t){e.setState({msg:t}),console.log("index===",t)}))}},{key:"render",value:function(){var e=this;return(0,b.jsx)(h.Consumer,{children:function(n){return(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{children:"Son Children"}),(0,b.jsx)("h1",{children:e.state.msg}),(0,b.jsx)("h1",{children:e.context.age}),(0,b.jsx)("h1",{children:n.address}),(0,b.jsx)(x,{})]})}})}}]),t}(c.Component);y.contextTypes={age:l().number};var x=function(){var e=(0,c.useContext)(h).address;return(0,b.jsx)("div",{children:e})},v=y,m={container:{width:"400px",height:"400px",border:"1px solid black"},children:{width:"300px",height:"300px",border:"1px solid black"},son:{width:"200px",height:"200px",border:"1px solid black"}},g=function(e){(0,s.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=n.call.apply(n,[this].concat(i))).state={name:"\u6211\u662fson"},e.pubsub=null,e}return(0,i.Z)(t,[{key:"sendChildren",value:function(){this.props.getSonData(this.state.name)}},{key:"componentDidMount",value:function(){var e=this;this.pubsub=PubSub.subscribe("name",(function(n,t){e.setState({name:t})}))}},{key:"componentWillUnmount",value:function(){PubSub.unsubscribe(this.pubsub)}},{key:"render",value:function(){var e=this,n=this.props.address;return(0,b.jsxs)("div",{onClick:function(){return e.sendChildren()},style:m.son,children:["son\u7ec4\u4ef6",(0,b.jsx)("br",{}),"\u6765\u81ea--PubSub\u4f20\u503c--name:",this.state.name,(0,b.jsx)("br",{}),"\u6765\u81ea --\u4e0a\u4e0b\u6587context\u4f20\u53c2 age---",this.context.age,(0,b.jsx)("br",{}),"\u6765\u81ea-\u4e0a\u4e0b\u6587provider\u65b9\u5f0f\u4f20\u503c\u7684address ",n,(0,b.jsx)(v,{})]})}}]),t}(c.Component);g.contextTypes={age:l().number};var O={container:{width:"400px",height:"400px",border:"1px solid black"},children:{width:"300px",height:"300px",border:"1px solid black"},son:{width:"200px",height:"200px",border:"1px solid black"}},j=function(e){(0,s.Z)(t,e);var n=(0,a.Z)(t);function t(e){var r;return(0,o.Z)(this,t),(r=n.call(this,e)).state={name:"weiwei",age:100,address:"beijing"},r}return(0,i.Z)(t,[{key:"getChildContext",value:function(){return{age:this.state.age}}},{key:"changeName",value:function(){var e=this;this.setState({name:"\u6539\u54e6\u4e86;\u997f"},(function(){f().publish("name",e.state.name)}))}},{key:"render",value:function(){var e=this,n=this.state,t=n.name,o=n.address;return(0,b.jsx)(h.Provider,{value:{address:o},children:(0,b.jsxs)("div",{style:O.container,children:[(0,b.jsx)(u.rU,{to:{pathname:"/home",state:{index:"123"}},children:"\u8df3\u8f6c\u9996\u9875"}),(0,b.jsx)(r.Z,{type:"primary",onClick:function(){return e.changeName()},children:"\u6539\u66f4name"}),"\u7236\u7ec4\u4ef6 --- ",t,(0,b.jsx)(S,{name:t})]})})}}]),t}(c.Component);j.childContextTypes={age:l().number};var S=function(e){(0,s.Z)(t,e);var n=(0,a.Z)(t);function t(){return(0,o.Z)(this,t),n.apply(this,arguments)}return(0,i.Z)(t,[{key:"getSonData",value:function(e){console.log(e,"msg")}},{key:"render",value:function(){var e=this,n=this.props,t=n.name,r=n.children;return(0,b.jsx)(h.Consumer,{children:function(n){return(0,b.jsxs)("div",{style:O.children,children:["children\u7ec4\u4ef6",(0,b.jsx)("br",{}),"\u6765\u81ea --\u4e0a\u4e0b\u6587context\u4f20\u53c2 age---",e.context.age,(0,b.jsx)("br",{}),"\u6765\u81ea--\u7236\u7ec4\u4ef6prpos\u4f20\u60e8\u7684name----",t,(0,b.jsx)("br",{}),"\u6765\u81ea--\u4e0a\u4e0b\u6587provider\u65b9\u5f0f\u4f20\u503c\u7684address----",n.address,(0,b.jsx)("div",{children:r}),(0,b.jsx)(g,{Context:h,address:n.address,getSonData:e.getSonData})]})}})}}]),t}(c.Component);S.contextTypes={age:l().number}},888:function(e,n,t){"use strict";var r=t(9047);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,n,t,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:o};return t.PropTypes=t,t}},2007:function(e,n,t){e.exports=t(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3538:function(e,n,t){e=t.nmd(e),function(t,r){"use strict";var o={};t.PubSub?(o=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=o,function(e){var n={},t=-1,r="*";function o(e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!0;return!1}function i(e){return function(){throw e}}function s(e,n,t){try{e(n,t)}catch(r){setTimeout(i(r),0)}}function a(e,n,t){e(n,t)}function c(e,t,r,o){var i,c=n[t],u=o?a:s;if(Object.prototype.hasOwnProperty.call(n,t))for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&u(c[i],e,r)}function u(e,n,t){return function(){var o=String(e),i=o.lastIndexOf(".");for(c(e,e,n,t);-1!==i;)i=(o=o.substr(0,i)).lastIndexOf("."),c(e,o,n,t);c(e,r,n,t)}}function p(e){var t=String(e);return Boolean(Object.prototype.hasOwnProperty.call(n,t)&&o(n[t]))}function l(e){for(var n=String(e),t=p(n)||p(r),o=n.lastIndexOf(".");!t&&-1!==o;)o=(n=n.substr(0,o)).lastIndexOf("."),t=p(n);return t}function d(e,n,t,r){var o=u(e="symbol"===typeof e?e.toString():e,n,r);return!!l(e)&&(!0===t?o():setTimeout(o,0),!0)}e.publish=function(n,t){return d(n,t,!1,e.immediateExceptions)},e.publishSync=function(n,t){return d(n,t,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!==typeof r)return!1;e="symbol"===typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(n,e)||(n[e]={});var o="uid_"+String(++t);return n[e][o]=r,o},e.subscribeAll=function(n){return e.subscribe(r,n)},e.subscribeOnce=function(n,t){var r=e.subscribe(n,(function(){e.unsubscribe(r),t.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){n={}},e.clearSubscriptions=function(e){var t;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&delete n[t]},e.countSubscriptions=function(e){var t,r,o=0;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)){for(r in n[t])o++;break}return o},e.getSubscriptions=function(e){var t,r=[];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&r.push(t);return r},e.unsubscribe=function(t){var r,o,i,s=function(e){var t;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e))return!0;return!1},a="string"===typeof t&&(Object.prototype.hasOwnProperty.call(n,t)||s(t)),c=!a&&"string"===typeof t,u="function"===typeof t,p=!1;if(!a){for(r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(o=n[r],c&&o[t]){delete o[t],p=t;break}if(u)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&o[i]===t&&(delete o[i],p=!0)}return p}e.clearSubscriptions(t)}}(o)),void 0!==e&&e.exports&&(n=e.exports=o),n.PubSub=o,e.exports=n=o}("object"===typeof window&&window||this)}}]);
//# sourceMappingURL=ComponentProps.8154eb06.chunk.js.map